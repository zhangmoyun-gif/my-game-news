<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆè¡Œä¸šåŠ¨æ€çœ‹æ¿</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; line-height: 1.6; margin: 0; padding: 20px; background: #f6f8fa; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .news-item { border-left: 4px solid #0366d6; padding-left: 15px; margin-bottom: 15px; }
        .tag { display: inline-block; background: #eef5ff; color: #0366d6; padding: 2px 8px; border-radius: 4px; font-size: 0.8em; margin-right: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 10px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background: #f6f8fa; }
        .filters { background: #f6f8fa; padding: 15px; border-radius: 5px; margin-bottom: 15px; }
        select, input { padding: 5px; margin-right: 10px; }
    </style>
</head>
<body>
    <div id="app" class="container">
        <h1>ğŸ® æ¸¸æˆè¡Œä¸šåŠ¨æ€çœ‹æ¿</h1>
        <p>æœ€åæ›´æ–°: {{ lastUpdated }}</p>

        <!-- èµ„è®¯å¤´æ¡éƒ¨åˆ† -->
        <section class="card">
            <h2>ğŸ“° æœ¬å‘¨è¡Œä¸šå¤´æ¡</h2>
            <div v-for="article in topArticles" :key="article.link" class="news-item">
                <h3><a :href="article.link" target="_blank">{{ article.title }}</a></h3>
                <p>{{ article.summary }}</p>
                <div class="meta">
                    <small>æ¥æº: {{ article.source }} | æ—¥æœŸ: {{ article.published }}</small>
                    <span v-for="tag in article.tags" :key="tag" class="tag">#{{ tag }}</span>
                </div>
            </div>
        </section>

        <!-- æ–°æ¸¸æ•°æ®éƒ¨åˆ† -->
        <section class="card">
            <h2>ğŸ¯ è¿‘æœŸæ–°æ¸¸æ•°æ® 
                <button @click="showFilters = !showFilters" class="filter-btn">
                    {{ showFilters ? 'éšè—' : 'æ˜¾ç¤º' }}ç­›é€‰å™¨
                </button>
            </h2>
            
            <div v-if="showFilters" class="filters">
                <label>å¹³å°:
                    <select v-model="filters.platform">
                        <option value="">å…¨éƒ¨</option>
                        <option>æ‰‹æ¸¸</option>
                        <option>PC</option>
                        <option>ä¸»æœº</option>
                    </select>
                </label>
                <label>ç±»å‹:
                    <select v-model="filters.genre">
                        <option value="">å…¨éƒ¨</option>
                        <option>RPG</option>
                        <option>SLG</option>
                        <option>FPS</option>
                        <option>MOBA</option>
                    </select>
                </label>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>æ¸¸æˆå</th>
                        <th>å¹³å°</th>
                        <th>ç±»å‹</th>
                        <th>ä¸Šçº¿æ—¥æœŸ</th>
                        <th>é¢„ä¼°ä¸‹è½½é‡</th>
                        <th>é¢„ä¼°æµæ°´</th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="game in filteredGames" :key="game.name">
                        <td>{{ game.name }}</td>
                        <td>{{ game.platform.join(', ') }}</td>
                        <td>{{ game.genre.join(', ') }}</td>
                        <td>{{ game.release_date }}</td>
                        <td>{{ game.estimated_downloads }}</td>
                        <td>{{ game.estimated_revenue }}</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    lastUpdated: 'åŠ è½½ä¸­...',
                    topArticles: [],
                    newGames: [],
                    showFilters: false,
                    filters: {
                        platform: '',
                        genre: ''
                    }
                };
            },
            computed: {
                filteredGames() {
                    return this.newGames.filter(game => {
                        const platformMatch = !this.filters.platform || 
                            game.platform.includes(this.filters.platform);
                        const genreMatch = !this.filters.genre ||
                            game.genre.includes(this.filters.genre);
                        return platformMatch && genreMatch;
                    });
                }
            },
            async mounted() {
                try {
                    const response = await fetch('./data.json');
                    const data = await response.json();
                    this.lastUpdated = data.last_updated;
                    this.topArticles = data.top_articles;
                    this.newGames = data.new_games;
                } catch (error) {
                    console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
                    this.lastUpdated = 'æ•°æ®åŠ è½½å¤±è´¥';
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
